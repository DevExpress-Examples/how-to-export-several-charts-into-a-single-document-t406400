<!DOCTYPE html>
<html>
<head>
    <title>Example</title>

    <script type="text/javascript" src="js/jquery-2.2.3.min.js"></script>
    <script type="text/javascript" src="js/dx.all.js"></script>
    <script type="text/javascript" src="data.js"></script>

    <link rel="stylesheet" type="text/css" href="css/dx.common.css" />
    <link rel="stylesheet" type="text/css" href="css/dx.light.css" />


    <script type="text/javascript">
        var getSVG = function (charts) {
            var svgArr = [],
                top = 0,
                width = 0,
                svgres,
                i;

            for (i = 0; i < charts.length; ++i) {
                svgres = charts[i].svg();
                var svg = svgres.replace('<svg', '<g transform="translate(0,' + top + ')" ');
                svg = svg.replace('</svg>', '</g>');

                top += charts[i].chartHeight;
                width = Math.max(width, charts[i].chartWidth);

                svgArr.push(svg);
            }

            svgres = '<svg height="' + top + '" width="' + width + '" version="1.1" xmlns="http://www.w3.org/2000/svg">' + svgArr.join('') + '</svg>';
            return svgres;
        };

        $(function () {
            var chartInstance = $("#chart").dxChart({
                dataSource: dataSource,
                series: {
                    argumentField: "name",
                    valueField: "height",
                    type: "bar"
                },
                valueAxis: {
                    min: 8000
                }
            }).dxChart("instance");

            var chartInstance2 = $("#chart2").dxChart({
                dataSource: dataSource2,
                commonSeriesSettings: {
                    argumentField: "state",
                    type: "bar",
                    hoverMode: "allArgumentPoints",
                    selectionMode: "allArgumentPoints",
                    label: {
                        visible: true,
                        format: {
                            type: "fixedPoint",
                            precision: 0
                        }
                    }
                },
                series: [
                    { valueField: "year2004", name: "2004" },
                    { valueField: "year2001", name: "2001" },
                    { valueField: "year1998", name: "1998" }
                ],
                title: "Gross State Product within the Great Lakes Region",
                legend: {
                    verticalAlignment: "bottom",
                    horizontalAlignment: "center"
                }
            }).dxChart("instance");

            $("#export").dxButton({
                icon: "export",
                text: "Export",
                onClick: function () {
                    chartInstance.chartHeight = $("#chart").height();
                    chartInstance.chartWidth = $("#chart").width();
                    chartInstance2.chartHeight = $("#chart2").height();
                    chartInstance2.chartWidth = $("#chart2").width();

                    var fileHeight = chartInstance.chartHeight + chartInstance2.chartHeight + 200,
                        fileWidth = chartInstance.chartWidth;

                    var svg = getSVG([chartInstance, chartInstance2])
                    DevExpress.viz.exportFromMarkup(svg, {
                        fileName: "chart",
                        format: 'PNG',
                        height: fileHeight,
                        width: fileWidth
                    })
                }
            });
        });
    </script>

</head>
<body id="form">
    <div id="export"></div>
    <div id="chart"></div>
    <div id="chart2"></div>
</body>
</html>
